# 15. 고급 문법

- object 가 python에서 가장 큰 부모이다. dir의 print값이 나왓기 때문에



## 1)열거가능객체

- for 반복문의 순회 대상 객체, 객체를 for문 열거가능하게 만듬
- 해당 객체의 `__iter__()` 메서드로 열거가능 객체 획득
  - 열거 가능 객체(list등)은 `__iter__()` 메서드를 정의해야함
- 매 루프마다 `__next()__` 함수를 통해 다음 요소를 추출
- 더 이상 소요가 없는데 `__next()__`를 호출하는 경우
  - StopIteration 예외가 발생하고 for 반복문 끝냄



- 기존) 내부적으로 iter가 있는경우

```python
nums = [11, 22, 33]
it = iter(nums)
while True:
	try:
		num = next(it)
	except StopIteration:
        break
	print(num)
    
11
22
33
```

- 열거 가능 객체 예제

```python
class Seq:
    def __init__(self,data):
        self.data = data
        self.index =-2      # 개발자가 추가한 맴버 변수
    
    def __iter__(self):  # 순회할 수 있는 참조를 리턴한다 ( 객체를 순회가능하게 만듬)
        return self

    def __eq__(self,other):
        return self.data ==other.data  # 왼쪽(self)가 오른쪽 other와 값이 같니?

    def __next__(self):
        self.index +=2
        if self.index >= len(self.data):  # k를 뽑아낼 수 있게 만듬
            self.index = -2  #를 넣으면뒤에 for문이 발생되게하려면 초기화 시켜준다.
            raise StopIteration

        return self.data[self.index:self.index+2]

solarterm1 = Seq("입춘우수경칩춘분청명곡우입하소만망종하지소서대서")
solarterm2 = Seq("입춘우수경칩춘분청명곡우입하소만망종하지소서대서")

print(solarterm1.__dict__)   # 이번 경우에서 개발자가 추가한 맴버변수 알고싶을때, 사전 형태로 맴버 보여주고 적어줌
print(solarterm1.__dir__())  # 맴버변수가 아닌 함수이다. dir 메서드를 호출 한것


 for k in solarterm1:
     print(k, end =",")

 for k in solarterm2:      # 1.루프한번돌면 index가 len보다 크기떄문에 끝임
     print(k, end =",")   # 1. 1개를 돌면 StopIteration 이 작동되서 리셋안됨   1,2번 # 구분해서 print 할것

 print(solarterm1 == solarterm2)  # 2. 참조가 달라서__eq__가 없으면 False를 줌, eq주면 True임
 print(dir(solarterm1))    # dir의 객체 인스턴스 줌 결과는 메서드들 보여준다.
```





## 2) 제너레이터

- 객체로 순회가능한 객체를 만드는 것은 귀찮은 작업
- 단일 함수로 만들고 싶다
- 제너레이터 함수로 대체 가능
- 함수에서 데이터를 연속해서 리턴(yield)
- 함수가 끝나면(혹은 return 실행) StopIteration 예외 발생
- 함수를 호출하면 함수가 실행되는 것이 아니고 순회 가는 객체가 리턴
- 순회 가능 객체로 순회할 때 실제 함수가 실행됨

```python
def seqgen(data):
    for index in range(0,len(data),2): # __next__가 가지는게 2, 3 line임
        yield data[index:index+2]    # yield에 의해 __iter__과 __next__를 가진 객체로 변함 = 읽을 수 있는 객체로 변함!
        
solarterm = seqgen('입춘우수경칩춘분청명곡우입하소만망종하지소서대서') # generater 생성
print(solarterm) 
print(dir(solarterm)) # 여기 포함된 메서드들  __init__, __next__,등을 보여줌 

for k in solarterm:
    print(k,end =',')
    
입춘,우수,경칩,춘분,.....,대서
```

