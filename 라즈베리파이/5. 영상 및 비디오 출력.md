# 5. 영상 및 비디오 출력

- OpenCV 설치

  - pip install opencv-python

- 필수 메서드

  - cv2.imread(filename [, flags])
    - 영상파일을 읽어 numpy 배열로 반환
      - filename : 영상 파일 명
      - flags
        - cv2.IMREAD_COLOR(디폴트)
        - cv2.IMREAD_GRAYSCALE  흑백
        - cv2.IMREAD_UNCHANGED  원본

  - cv2.imwrite(filename, img [, params])
    - numpy.ndarray의 배열 img를 filename의 영상 파일로 저장
    - 파일의 확장자에 의해 영상 포맷 결정
    - params는 압축 관련 인수로 생략 가능
      - cv2.IMWRITE_PNG_COMPRESSION [0,9] 기본값 3
      - cv2.IMWRITE_JPEG_QUALITY [0, 100] 기본값 95



---

- 파일 데이터,바이트 구성 등을 알아보는 예제

```python
import cv2

image_file ='./data/picture.jpg'
img = cv2.imread(image_file) # cv2.imread_color
img2 = cv2.imread(image_file, cv2.IMREAD_GRAYSCALE)

print(img.shape, img2.shape) # 7952x5304x3 byte
print(img.dtype, img2.dtype) # 7952x5304  byte

cv2.imshow('Lena color', img) #3차원데이터 창의 타이틀
cv2.imshow('Lena grayscale', img2) #2차원데이터

cv2.waitKey(0)  #키 입력대기,인자는시간(ms), 0이면 무한대기
cv2.destroyAllWindows() # 출력한 모든 창닫기

```

- 파일을 저장하는예제 특정이름으로

```python
import cv2

image_file = './data/picture.jpg'

img = cv2.imread(image_file)


cv2.imwrite('./data/Lena.bmp', img)
cv2.imwrite('./data/Lena.png', img)
cv2.imwrite('./data/Lena2.png', img, [cv2.IMWRITE_PNG_COMPRESSION, 9])
cv2.imwrite('./data/Lena2.jpg', img, [cv2.IMWRITE_JPEG_QUALITY, 90])
```

- 카메라 구현, 프레임 조정

```python
import cv2

cap =cv2.VideoCapture(1)  #1번카메라

frame_size = (int(cap.get(cv2.CAP_PROP_FRAME_WIDTH)),
              int(cap.get(cv2.CAP_PROP_FRAME_HEIGHT)))

print('frame_size = ', frame_size)

while True:
    retval, frame = cap.read() # 프레임 캡처
    if not retval: break

    cv2.imshow('frame', frame)
    # key = cv2.waitKey(25) # 25ms 동안 기다린다  1000/25 --> 40프레임(fps)
    key = cv2.waitKey(33) # 1000/33 -->30fps
    if key == 27: break # ESC키를 누른 경우 루프 탈출

if cap.isOpened():
    cap.release()

cv2.destroyAllWindows()
```

